!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audio=new Audio,this.audio.crossOrigin="anonymous",this.audio.src="assets/bensound-dubstep.mp3",this.audio.load(),this.audio.controls=!1,this.audio.loop=!0,this.audio.autoplay=!1,this.init()}return n(t,[{key:"init",value:function(){document.getElementById("audio-box").appendChild(this.audio)}},{key:"getAudio",value:function(){return this.audio}},{key:"reset",value:function(){this.audio.pause(),this.audio.currentTime=0}},{key:"play",value:function(){this.audio.play()}}]),t}();t.exports=a},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var a=function(){function t(e,i,n,a,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.img=e,this.x=i,this.y=n,this.width=a,this.height=r}return n(t,[{key:"draw",value:function(t,e,i){t.imageSmoothingEnabled=!1,t.drawImage(this.img,e,i,this.width,this.height)}}]),t}();t.exports=a},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var a=i(1),r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=500,this.y=300,this.velocity=0,this.frame=0,this.animation=[0,1,2,1],this.rotation=0,this.gravity=.25,this._flap=4.6,this.sBird=new a(e,1e3,400,68,48)}return n(t,[{key:"getWidth",value:function(){return this.sBird.width}},{key:"getLeft",value:function(){return this.x}},{key:"getRight",value:function(){return this.getLeft()+this.sBird.width}},{key:"getTop",value:function(){return this.y}},{key:"getBottom",value:function(){return this.getTop()+this.sBird.height}},{key:"flap",value:function(){this.velocity=-this._flap}},{key:"update",value:function(t,e){t&&(this.velocity+=this.gravity,this.y+=this.velocity,this.y>=e.height-10&&(this.y=e.height-10,this.velocity=this._flap))}},{key:"draw",value:function(t){t.save(),t.rotate(this.rotation),this.sBird.draw(t,this.x-this.sBird.width/2,this.y-this.sBird.height/2),t.restore()}}]),t}();t.exports=r},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var a=i(2),r=i(0),o=["#D5FFDD","#295E71","#F4BA40","#F18738","#978C83"],s=["assets/flappy-bird-background.png","assets/game-over.png","assets/spacebar-instruction.png","assets/get-ready.png","assets/wings-up.png"],c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=new AudioContext,this.analyser=this.context.createAnalyser(),this.images=[],this.music=new r,this.gameOver=!1,this.gameStarted=!1,this.score=0,this.highscore=null===localStorage.getItem("highscore")?0:localStorage.getItem("highscore"),this.canvas=document.getElementById("analyser-render"),this.ctx=this.canvas.getContext("2d"),this.colorCollection=[]}return n(t,[{key:"init",value:function(){for(var t=this,e=0;e<50;e++)this.colorCollection.push(o[Math.floor(Math.random()*o.length)]);this.preloadImages().then(function(e){e.forEach(function(e){t.images.push(e.path[0])}),t.start()})}},{key:"preloadImages",value:function(){return Promise.all(s.map(function(t){return new Promise(function(e,i){var n=new Image;n.src=t,n.onload=e,n.onerror=i})}))}},{key:"start",value:function(){var t=this,e=new a(this.images[4]),i=document.getElementById("score"),n=document.getElementById("high-score");i.innerHTML=this.score.toString(),n.innerHTML=localStorage.getItem("highscore"),this.context.createMediaElementSource(this.music.audio).connect(this.analyser),this.analyser.connect(this.context.destination),["click","keydown"].forEach(function(a){document.addEventListener(a,function(a){switch(a.which||a.keyCode){case 1:case 32:a.target===document.body&&a.preventDefault(),!1===t.gameOver?(t.music.play(),e.flap(),t.score++,t.score>t.highscore&&localStorage.setItem("highscore",t.score),i.innerHTML=t.score.toString(),n.innerHTML=localStorage.getItem("highscore"),t.gameStarted=!0):(t.gameOver=!1,e.x=500,e.y=300,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),e.draw(t.ctx),t.music.play(),e.flap(),t.gameStarted=!0,i.innerHtml=t.score,n.innerHtml=localStorage.getItem("highscore"),t.frameLooper(t.images[4],e));break;default:return}})}),this.frameLooper(this.images[4],e)}},{key:"frameLooper",value:function(t,e){var i=this,n=this.images[3],a=this.images[2],r=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(r),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!1===this.gameStarted&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(n,this.canvas.width/2-162.5,50,325,81),this.ctx.drawImage(a,this.canvas.width/2-182,400,364,106)),e.draw(this.ctx),e.update(this.gameStarted,this.canvas);for(var o=0;o<50;o++){this.ctx.fillStyle=this.colorCollection[o];var s=20*o,c=-r[o];s-20>e.getLeft()-e.getWidth()&&s-20<=e.getRight()-e.getWidth()&&(e.getTop()-20<Math.abs(c)||e.getBottom()-20>this.canvas.height-Math.abs(c))&&(this.gameOver=!0),this.ctx.fillRect(s,this.canvas.height,20,c),this.ctx.fillRect(s,0,20,-c)}window.requestAnimationFrame(function(){!1===i.gameOver?i.frameLooper(t,e):i.handleGameOver()})}},{key:"handleGameOver",value:function(){this.music.reset();var t=this.images[1],e=this.images[2];this.score=0,this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(t,this.canvas.width/2-162.5,50,325,81),this.ctx.drawImage(e,this.canvas.width/2-182,400,364,106)}}]),t}();t.exports=c},function(t,e,i){"use strict";var n=i(3);document.addEventListener("DOMContentLoaded",function(){(new n).init()})}]);
//# sourceMappingURL=bundle.js.map